diff -r xorg-server-1.20.10/dix/devices.c xorg-server-1.20.10-B/dix/devices.c
2501a2502,2503
>         int last_num_buttons = master->button->numButtons;
> 
2511a2514,2521
>         if (last_num_buttons < maxbuttons) {
>             master->button->xkb_acts = xnfreallocarray(master->button->xkb_acts,
>                                                        maxbuttons,
>                                                        sizeof(XkbAction));
>             memset(&master->button->xkb_acts[last_num_buttons],
>                    0,
>                    (maxbuttons - last_num_buttons) * sizeof(XkbAction));
>         }
diff -r xorg-server-1.20.10/randr/rrproperty.c xorg-server-1.20.10-B/randr/rrproperty.c
533c533
<     int totalSize;
---
>     uint64_t totalSize;
diff -r xorg-server-1.20.10/randr/rrproviderproperty.c xorg-server-1.20.10-B/randr/rrproviderproperty.c
501c501
<     int totalSize;
---
>     uint64_t totalSize;
diff -r xorg-server-1.20.10/Xi/exevents.c xorg-server-1.20.10-B/Xi/exevents.c
570,574c570,574
<             if (!to->button->xkb_acts) {
<                 to->button->xkb_acts = calloc(1, sizeof(XkbAction));
<                 if (!to->button->xkb_acts)
<                     FatalError("[Xi] not enough memory for xkb_acts.\n");
<             }
---
>             size_t maxbuttons = max(to->button->numButtons, from->button->numButtons);
>             to->button->xkb_acts = xnfreallocarray(to->button->xkb_acts,
>                                                    maxbuttons,
>                                                    sizeof(XkbAction));
>             memset(to->button->xkb_acts, 0, maxbuttons * sizeof(XkbAction));
576c576
<                    sizeof(XkbAction));
---
>                    from->button->numButtons * sizeof(XkbAction));
