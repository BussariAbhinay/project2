diff -urN a/fluent-plugin-td-1.2.1/fluent-plugin-td.gemspec b/fluent-plugin-td-1.2.1/fluent-plugin-td.gemspec
--- a/fluent-plugin-td-1.2.1/fluent-plugin-td.gemspec	2022-11-05 01:48:58.000000000 -0700
+++ b/fluent-plugin-td-1.2.1/fluent-plugin-td.gemspec	2024-02-16 14:31:43.387042200 -0800
@@ -8,9 +8,9 @@
   gem.version     = Fluent::Plugin::TreasureDataPlugin::VERSION
   gem.authors     = ['Treasure Data, Inc.']
   gem.email       = 'support@treasure-data.com'
-  gem.files       = `git ls-files`.split("\n")
-  gem.test_files  = `git ls-files -- {test,spec,features}/*`.split("\n")
-  gem.executables = `git ls-files -- bin/*`.split("\n").map { |f| File.basename(f) }
+  gem.files       = Dir['**/*']
+  gem.test_files  = gem.files.grep(%r{^(test|spec|features)/}) 
+  gem.executables = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
   gem.require_paths = ['lib']
   gem.license       = 'Apache-2.0'
 
